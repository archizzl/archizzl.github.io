<!DOCTYPE html>
<html>
<head>
<style>
  * {
    margin: 0;
    padding: 0;
    user-select: none;
  }
  #container {
    height: 100vh;
    width: 100vw;
    position: absolute;
    background-color: black;
    overflow: hidden;
    z-index: 1;
  }
  .coordinates {
    height: 5px;
    width: 5px;
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    opacity: 0.8;
    z-index: 5;
    transition: 0.1s;
  }
  .bar {
    background-color: red;
    position: absolute;
    z-index: 3;
    height: 5px;
    width: 5px;
  }
  .dots {
    position: absolute;
    z-index: 10;
    height: 5px;
    width: 5px;
    background-color: white;
    opacity: 1;
    transition: 1s;
  }
</style>
</head>
<body>
  <div id='container'></div>
</body>
<script>
container = document.getElementById('container')

function create(){
  coords = [];
  for(i = 0; i<10; i++){
    x = Math.random()*100;
    if(x==99){
      x-=1
    }
    y = Math.random()*100;
    if(y==99){
      y-=1
    }
    coords.push(x)
    coords.push(y)
  }
  for(j = 0; j<coords.length; j++){
    current_coordinate = document.createElement('div')
    current_coordinate.setAttribute('class', 'coordinates')
    current_coordinate.style.left = coords[j] + 'vw'
    j++
    current_coordinate.style.top = coords[j] + 'vh'
    container.appendChild(current_coordinate)
  }
}


function link(x1, y1, x2, y2){
  mid = document.createElement('div')
  mid.style.left = x1 + 'vw'
  mid.style.top = y2 + 'vh'
  mid.setAttribute('class', 'coordinates')
  container.appendChild(mid)


  hbar = document.createElement('div')
  hbar.setAttribute('class', 'bar')
  if(x1>x2){
    hbar.style.left = x2 + 'vw';
    hbar.style.width = x1-x2 + 'vw';
  }
  else {
    hbar.style.left = x1 + 'vw';
    hbar.style.width = x2-x1 + 'vw';
  }
  hbar.style.top = y2 + 'vh'
  hbar.style.opacity = Math.random()*0.5 + 0.5
  hbar.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
  container.appendChild(hbar)

  vbar = document.createElement('div')
  vbar.setAttribute('class', 'bar')
  if(y1>y2){
    vbar.style.top = y2 + 'vh'
    vbar.style.height = y1 - y2 + 'vh'
  }
  else {
    vbar.style.top = y1 + 'vh'
    vbar.style.height = y2 - y1 + 'vh'
  }
  vbar.style.left = x1 + 'vw'
  vbar.style.opacity = Math.random()*0.5 + 0.5

  vbar.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
  container.appendChild(vbar)
}

function draw(){
  a = 0;
  b = 1;
  c = 2;
  d = 3;
  for(i = 0; i<(coords.length)/2-1; i++){
    link(coords[a], coords[b], coords[c], coords[d])
    a+=2
    b+=2
    c+=2
    d+=2
    console.log(c + '' + d)
  }
  link(coords[0], coords[1], coords[18], coords[19])
}



function draw2(){
  a = 0;
  b = 1;
  c = 2;
  d = 3;
  for(i = 0; i<(coords.length)/2-1; i++){
    zoom(coords[a], coords[b], coords[c], coords[d])
    a+=2
    b+=2
    c+=2
    d+=2
  }

  x_int_i = 0;
  y_int_i = 0;
  dots = document.querySelectorAll('.dots')
  x_int = setInterval(function(){
    if(x_int_i==(dots.length-1)){
      clearInterval(x_int)
      y_int = setInterval(function(){
        if(y_int_i==(dots.length-1)){
          clearInterval(y_int)
          y_int = setInterval()
        }
        dots[y_int_i].style.top = dots[y_int_i].dataset.ymove + 'vh'
        y_int_i++
      })
    }
    dots[x_int_i].style.left = dots[x_int_i].dataset.xmove + 'vw'
    x_int_i++
  })
}


function zoom(x1, y1, x2, y2){
  dot = document.createElement('div')
  dot.setAttribute('class', 'dots')
  dot.style.left = x1 + 'vw';
  dot.setAttribute('data-xmove', x2)
  dot.style.top = y1 + 'vh'
  dot.setAttribute('data-ymove', y2)
  container.appendChild(dot)
}
function clear(){

    bars = document.querySelectorAll('.bar')
    for(k = 0; k<bars.length; k++){
      bars[k].remove()
    }
    cs = document.querySelectorAll('.coordinates')
    for(j = 0; j<cs.length; j++){
      cs[j].remove()
    }
    ds = document.querySelectorAll('.dots')
    for(z = 0; z<(ds.length); z++){
      ds[z].remove()
    }
}
function run(){
  create()
  link()
  draw()
  draw2()
}
document.onclick = function(){
  clear()
  run()
}



run()

</script>
</html>
